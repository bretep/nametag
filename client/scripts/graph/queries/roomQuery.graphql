#import "../fragments/nametagView.graphql"

query roomQuery($id: ID!){
  room(id:$id) {
    id
    title
    norms
    nametagCount
    welcome
    topic
    closed
    templates {
      id
      image
      name
      description
    }
    modOnlyDMs
    mod {
      id
      name
      bio
      image
      badges {
        ...badgeView
      }
    }
    nametags {
      ...nametagView
    }
    messages {
      id
      text
      createdAt
      editedAt
      saved
      author {
        id
        image
        name
      }
      reactions {
        emoji
        nametagId
      }
      recipient {
        id
        image
        name
      }
      replies {
        id
        text
        createdAt
        editedAt
        saved
        author {
          id
          image
          name
        }
        reactions {
          emoji
          nametagId
        }
        parent {
          id
        }
      }
    }
  }
  me {
    id
    images
    displayNames
    nametags {
      id
      mentions
      latestVisit
      banned
      room {
        id
        title
        latestMessage
        newMessageCount
        mod {
          id
          image
          name
        }
      }
    }
    badges {
      ...badgeView
    }
  }
}
